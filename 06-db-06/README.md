# Домашнее задание к занятию "6.6. Troubleshooting"

## Задача 1

- напишите список операций, которые вы будете производить для остановки запроса пользователя
```
Чтобы найти зависшую CRUD  db.currentOp()
Чтобы сбросить db.killOp(opid)
```
- предложите вариант решения проблемы с долгими (зависающими) запросами в MongoDB
```
Думаю поможет вот такая опция в запросах к БД maxTimeMS() , она ограничивает время на выполнения запроса.
```

## Задача 2

Как вы думаете, в чем может быть проблема?
```
Думаю, что проблема связана с нехваткой оперативной памяти и переносом данных из оперативной памяти в swap раздел.
```
 
## Задача 3

Вы подняли базу данных MySQL для использования в гис-системе. При росте количества записей, в таблицах базы,
пользователи начали жаловаться на ошибки вида:
```python
InterfaceError: (InterfaceError) 2013: Lost connection to MySQL server during query u'SELECT..... '
```

Как вы думаете, почему это начало происходить и как локализовать проблему?
```
Локализовать проблему можно посмотрев в error log.
```
Какие пути решения данной проблемы вы можете предложить?
```
В документации пишут, что вероятны 3 причины, и для их решения необходимо увеличить следующие значения
1. net_read_timeout
2. connect_timeout
3. max_allowed_packet
```

## Задача 4


Вы решили перевести гис-систему из задачи 3 на PostgreSQL, так как прочитали в документации, что эта СУБД работает с 
большим объемом данных лучше, чем MySQL.

После запуска пользователи начали жаловаться, что СУБД время от времени становится недоступной. В dmesg вы видите, что:

`postmaster invoked oom-killer`

Как вы думаете, что происходит?
```
Думаю, что ОС пытается освободить оперативную память.
```
Как бы вы решили данную проблему?
```
Думаю можно ограничить ресурсы для PostgreSQL или увеличить объем памяти.
```

